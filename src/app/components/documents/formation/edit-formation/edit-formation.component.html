<div class="container" >
    <div class="row">
        <div class="col-md-12 mt-6">
            <div class="card">
                <div class="card-header">
                    <div class="row">
                        <div class="col-md-1">
                            <button [routerLink]="['/formations']" class="btn btn-light"><i class="bi bi-arrow-left"></i></button>
                        </div>
                        <div class="col-md-10" style="text-align: center;">
                            <h4>Modification de {{formation.titre}}</h4>
                        </div>
                        <div class="col-md-1"></div>
                    </div>
                </div>
                <div class="card-body">
                    <form [formGroup]="formEdit" (ngSubmit)="onSubmit()">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label>Titre</label>
                                        <input type="text" formControlName="titre" class="form-control"
                                          [(ngModel)]="formation.titre" placeholder="au moins 3 letttres ">
                                    <p style="color: brown;"
                                        *ngIf="!formEdit.controls['titre'].valid"> (Le remier
                                        caractere doit etre une lettres majuscule ) </p>
                                        <input type="hidden" formControlName="categorie" class="form-control" [(ngModel)]="formation.categorie" >
                                        <label>Type</label>
                                        <select [(ngModel)]="formation.type" formControlName="type" class="form-control"
                                         (change)="onSelectionChange()">
                                            <option *ngFor="let option of options" [value]="option.value">{{ option.label }}</option>
                                          </select>
                                          <p style="color: brown;" *ngIf="!formEdit.controls['type'].valid"> (Champ obligatoire * ) </p>

                                    <label>Description</label>
                                    <textarea type="text" formControlName="description" class="form-control"
                                    [(ngModel)]="formation.description" placeholder="au moins 3 letttres "></textarea>
                                    <p style="color: brown;"
                                        *ngIf="!formEdit.controls['description'].valid"> (Le
                                        premier caractere doit etre une lettres majuscule ) </p>

                                </div>
                                <div class="form-group card mt-2">
                                    <button [disabled]="!formEdit.valid" type="submit"
                                         class="btn btn-secondary px-4">Enregistrer</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                    
            </div> <br>

            
        </div>
    </div>
</div>  <br>

<div class="container" >
    <div class="row">
        <div class="col-md-12 mt-6">
            <div class="card">
                <div class="card-header">
                    <div class="row">
                        <div class="col-md-1" *ngIf="!fich">
                            <button class="btn btn-secondary" 
                             (click)="OnOut()"><i class="bi bi-arrow-left"></i></button>
                        </div>
                        <div class="col-md-10" style="text-align: center;">
                            <h4>Modification des fichiers </h4>
                        </div>
                        <div class="col-md-1">
                            <button class="btn btn-secondary" *ngIf="fich"
                             (click)="OnUp()"><i class="bi bi-plus"></i></button>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row" *ngIf="!fich">
                        <div class="col-md-11">
                          <label class="btn btn-default p-0">
                            <input type="file" (change)="selectFile($event)" />
                          </label>
                        </div>
                      
                        <div class="col-md-1 p-0">
                          <button class="btn btn-secondary" [disabled]="!selectedFiles" (click)="upload()">
                            Ajouter
                          </button>
                        </div>
                    </div>
                      
                    <div  class="progress my-3">
                        <div
                          class="progress-bar progress-bar-info progress-bar-striped"
                          role="progressbar"
                          attr.aria-valuenow="{{ progress }}"
                          aria-valuemin="0"
                          aria-valuemax="100"
                          [ngStyle]="{ width: progress + '%' }"
                        >
                          {{ progress }}%
                        </div>
                    </div>
                              
                    <div class="card mt-1" *ngIf="fich">
                        <div
                          class="list-group list-group-flush"
                          *ngFor="let file of files._embedded.fileDBs"> 
                            
                                <div  class="alert alert-secondary" role="alert">
                                    <div class="row">
                                        <div class="col-md-11">
                                          <p>{{ file.name }}</p>
                                        </div>
                                        <div class="col-md-1">
                                            <button (click)="onDeleteFille(file)" class="btn btn-light"><i class="bi bi-trash"></i></button>
                                        </div>
                                    </div>
                                </div>
                        </div>
                    </div>
                    <div class="card mt-2">
                        <button class="btn btn-secondary px-4"
                           routerLink="/formations">Terminer
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
